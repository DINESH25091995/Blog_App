{% extends "base.html" %}
{% block content %}
<!-- Load CSS -->
<link rel="stylesheet" href="{{ url_for('static', path='css/styles.css') }}">

<!-- Include Quill.js CSS -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<ul>
    <h1>Create a Blog</h1>
    <form method="post" action="/blogs/create" enctype="multipart/form-data">
        <div style="margin-bottom: 10px;">
            <label>Title :</label>
            <input type="text" name="title">
        </div>

        <div style="margin-bottom: 10px;">
            <label>Content :</label>
            <!-- Quill.js Editor -->
            <div id="editor" style="height: 200px;"></div>
            <!-- Hidden textarea to store formatted content -->
            <textarea name="content" id="content" style="display: none;"></textarea>
        </div>

        <div style="margin-bottom: 10px;">
            <label>Upload Image:</label>
            <input type="file" name="images" accept="image/*" multiple>
        </div>

        <button type="submit" class="login-btn">Create</button>
    </form>
</ul>

<!-- Include Quill.js JS -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<script>
    // Initialize Quill Editor
    var quill = new Quill('#editor', {
        theme: 'snow',  // 'snow' is the default theme with toolbar
        placeholder: 'Write your blog content here...',
        modules: {
            toolbar: [
                [{ 'header': [1, 2, false] }],
                ['bold', 'italic', 'underline', 'strike'],
                [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                [{ 'align': [] }],
                ['link', 'blockquote', 'code-block'],
                ['clean'] // Remove formatting button
            ]
        }
    });

    // Save the content to hidden textarea before form submission
    document.querySelector('form').onsubmit = function () {
        document.querySelector('#content').value = quill.root.innerHTML;
    };
</script>
{% endblock %}
